    /* Ensure dropdown text is visible */
    select, option {
        color: #222 !important;
        background: #fff !important;
    }
{% extends "base.html" %}

{% block title %}Edit Student - Face Recognition Attendance{% endblock %}

{% block content %}
<div style="padding: 2rem 0;">
    <div style="text-align: center; margin-bottom: 2rem;">
        <h1 style="font-size: 2.5rem; background: linear-gradient(45deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
            <i class="fas fa-user-edit"></i> Edit Student
        </h1>
        <p style="color: rgba(255, 255, 255, 0.7);">Update student information</p>
    </div>

    <div class="card" style="max-width: 800px; margin: 0 auto;">
        <form method="POST" enctype="multipart/form-data">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                <!-- Personal Information -->
                <div>
                    <h3 style="margin-bottom: 1.5rem; color: #667eea; border-bottom: 2px solid rgba(102, 126, 234, 0.3); padding-bottom: 0.5rem;">
                        <i class="fas fa-user"></i> Personal Information
                    </h3>
                    
                    <div class="form-group">
                        <label for="student_id">
                            <i class="fas fa-id-card"></i> Student ID *
                        </label>
                        <input type="text" id="student_id" name="student_id" class="form-control" value="{{ student.student_id }}" required>
                    </div>

                    <div class="form-group">
                        <label for="name">
                            <i class="fas fa-user"></i> Full Name *
                        </label>
                        <input type="text" id="name" name="name" class="form-control" value="{{ student.name }}" required>
                    </div>

                    <div class="form-group">
                        <label for="roll">
                            <i class="fas fa-hashtag"></i> Roll Number *
                        </label>
                        <input type="text" id="roll" name="roll" class="form-control" value="{{ student.roll }}" required>
                    </div>

                    <div class="form-group">
                        <label for="gender">
                            <i class="fas fa-venus-mars"></i> Gender *
                        </label>
                        <select id="gender" name="gender" class="form-control" required>
                            <option value="Male" {{ 'selected' if student.gender == 'Male' }}>Male</option>
                            <option value="Female" {{ 'selected' if student.gender == 'Female' }}>Female</option>
                            <option value="Other" {{ 'selected' if student.gender == 'Other' }}>Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="dob">
                            <i class="fas fa-calendar"></i> Date of Birth *
                        </label>
                        <input type="date" id="dob" name="dob" class="form-control" value="{{ student.dob }}" required>
                    </div>
                </div>

                <!-- Academic Information -->
                <div>
                    <h3 style="margin-bottom: 1.5rem; color: #667eea; border-bottom: 2px solid rgba(102, 126, 234, 0.3); padding-bottom: 0.5rem;">
                        <i class="fas fa-graduation-cap"></i> Academic Information
                    </h3>

                    <div class="form-group">
                        <label for="department">
                            <i class="fas fa-building"></i> Department *
                        </label>
                        <select id="department" name="department" class="form-control" required>
                            <option value="Computer Science" {{ 'selected' if student.department == 'Computer Science' }}>Computer Science</option>
                            <option value="Information Technology" {{ 'selected' if student.department == 'Information Technology' }}>Information Technology</option>
                            <option value="Electronics" {{ 'selected' if student.department == 'Electronics' }}>Electronics</option>
                            <option value="Mechanical" {{ 'selected' if student.department == 'Mechanical' }}>Mechanical</option>
                            <option value="Civil" {{ 'selected' if student.department == 'Civil' }}>Civil</option>
                            <option value="Electrical" {{ 'selected' if student.department == 'Electrical' }}>Electrical</option>
                            <option value="Chemical" {{ 'selected' if student.department == 'Chemical' }}>Chemical</option>
                            <option value="Other" {{ 'selected' if student.department == 'Other' }}>Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="course">
                            <i class="fas fa-book"></i> Course *
                        </label>
                        <select id="course" name="course" class="form-control" required>
                            <option value="B.Tech" {{ 'selected' if student.course == 'B.Tech' }}>B.Tech</option>
                            <option value="M.Tech" {{ 'selected' if student.course == 'M.Tech' }}>M.Tech</option>
                            <option value="BCA" {{ 'selected' if student.course == 'BCA' }}>BCA</option>
                            <option value="MCA" {{ 'selected' if student.course == 'MCA' }}>MCA</option>
                            <option value="BSc" {{ 'selected' if student.course == 'BSc' }}>BSc</option>
                            <option value="MSc" {{ 'selected' if student.course == 'MSc' }}>MSc</option>
                            <option value="Other" {{ 'selected' if student.course == 'Other' }}>Other</option>
                        </select>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                        <div class="form-group">
                            <label for="year">
                                <i class="fas fa-calendar-alt"></i> Year *
                            </label>
                            <select id="year" name="year" class="form-control" required>
                                <option value="1" {{ 'selected' if student.year == '1' }}>1st</option>
                                <option value="2" {{ 'selected' if student.year == '2' }}>2nd</option>
                                <option value="3" {{ 'selected' if student.year == '3' }}>3rd</option>
                                <option value="4" {{ 'selected' if student.year == '4' }}>4th</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="semester">
                                <i class="fas fa-list-ol"></i> Semester *
                            </label>
                            <select id="semester" name="semester" class="form-control" required>
                                {% for i in range(1, 9) %}
                                <option value="{{ i }}" {{ 'selected' if student.semester == i|string }}>{{ i }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="division">
                                <i class="fas fa-layer-group"></i> Division *
                            </label>
                            <select id="division" name="division" class="form-control" required>
                                <option value="A" {{ 'selected' if student.division == 'A' }}>A</option>
                                <option value="B" {{ 'selected' if student.division == 'B' }}>B</option>
                                <option value="C" {{ 'selected' if student.division == 'C' }}>C</option>
                                <option value="D" {{ 'selected' if student.division == 'D' }}>D</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="teacher">
                            <i class="fas fa-chalkboard-teacher"></i> Class Teacher *
                        </label>
                        <input type="text" id="teacher" name="teacher" class="form-control" value="{{ student.teacher }}" required>
                    </div>
                </div>
            </div>

            <!-- Contact Information -->
            <div style="margin-top: 2rem;">
                <h3 style="margin-bottom: 1.5rem; color: #667eea; border-bottom: 2px solid rgba(102, 126, 234, 0.3); padding-bottom: 0.5rem;">
                    <i class="fas fa-address-book"></i> Contact Information
                </h3>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
                    <div class="form-group">
                        <label for="email">
                            <i class="fas fa-envelope"></i> Email Address *
                        </label>
                        <input type="email" id="email" name="email" class="form-control" value="{{ student.email }}" required>
                    </div>

                    <div class="form-group">
                        <label for="phone">
                            <i class="fas fa-phone"></i> Phone Number *
                        </label>
                        <input type="tel" id="phone" name="phone" class="form-control" value="{{ student.phone }}" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="address">
                        <i class="fas fa-map-marker-alt"></i> Address *
                    </label>
                    <textarea id="address" name="address" class="form-control" rows="3" required>{{ student.address }}</textarea>
                </div>
            </div>

            <!-- Photo Upload -->
            <div style="margin-top: 2rem;">
                <h3 style="margin-bottom: 1.5rem; color: #667eea; border-bottom: 2px solid rgba(102, 126, 234, 0.3); padding-bottom: 0.5rem;">
                    <i class="fas fa-camera"></i> Photo Upload
                </h3>

                <div style="display: flex; align-items: center; gap: 2rem; flex-wrap: wrap;">
                    <div>
                        <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: 0.5rem;">Current Photo:</p>
                        <img src="{{ url_for('static', filename='uploads/' + student.photo) }}" 
                             alt="{{ student.name }}" 
                             style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 3px solid rgba(255, 255, 255, 0.3);"
                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjUwIiBmaWxsPSIjNjY3ZWVhIi8+Cjwvc3ZnPgo='">
                    </div>
                    
                    <div style="flex: 1;">
                        <div class="form-group">
                            <label for="photo">
                                <i class="fas fa-image"></i> Update Photo (Optional)
                            </label>
                            <input type="file" id="photo" name="photo" class="form-control" accept="image/*">
                            <small style="color: rgba(255, 255, 255, 0.6); margin-top: 0.5rem; display: block;">
                                Leave empty to keep current photo. Upload a new photo to replace it.
                            </small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Submit Buttons -->
            <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 3rem; flex-wrap: wrap;">
                <button type="submit" class="btn btn-primary" style="min-width: 150px;">
                    <i class="fas fa-save"></i> Update Student
                </button>
                <a href="{{ url_for('students') }}" class="btn btn-secondary" style="min-width: 150px;">
                    <i class="fas fa-arrow-left"></i> Back to List
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
